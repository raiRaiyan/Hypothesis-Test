range = c(0,60)
args = commandArgs(TRUE)
contingencyTable = read.csv(args[2])
if(args[1]=="goodfittest"){
obs = as.vector(contingencyTable[[2]])
obs = obs[!is.na(obs)]adsdasd
prob = as.vector(as.numeric(contingencyTable[[3]]))
prob = prob[!is.na(prob)]
range =c(0,20)
result = chisq.test(x=obs,p=prob,correct=F)
cat(result$p.value)
}else{
contingencyTable[[1]] = NULL;
tab = as.matrix.data.frame(contingencyTable)
range = c(0,60)
result = chisq.test(x=tab,correct = F)
cat(result$p.value)
}
df1 = result$parameter
library(ggplot2,quietly = T)
upperTail = function(x)
{
y = dchisq(x,df = df1)
y[x<result$statistic] = NA
return(y)
}
CDist <- function(x)
{
dchisq(x,df = df1)
}
p <- ggplot(data.frame(x=range,aes(x=x)) +
stat_function(fun=CDist, geom="area", fill="white", colour="black")
p <- p + stat_function(fun =upperTail, geom="area", fill='#b14025')
p <- p + theme(panel.grid.major=element_blank(),
panel.grid.minor=element_blank(),
panel.background=element_rect(fill="#eae9c8") )
plot(p)
ggsave("chiSquare.png",width = 8,height = 8)
args = commandArgs(TRUE)
require("data.table",quietly=TRUE)
filepath = args[2]
if(args[1] == "goodfittest"){
data = fread(filepath,select=args[3],showProgress=FALSE)
if(arg[4] == 'r' || args[4] == 'R'){}
data = data[!is.na(data)]
}else{
data[is.na(data)] = args[4]
}
data = as.factor(data[[args[3]]])
tabulatedData = table(data)
cat(levels(data),'\n')
cat(tabulatedData)
}else{
data = fread(filepath,select=c(args[3],args[4]),showProgress=FALSE)
if(arg[5] == 'r' || args[5] == 'R'){}
data = data[!is.na(data)]
}else{
data[is.na(data)] = args[4]
}
data1 = as.factor(data[[args[3]]])
data2 = as.factor(data[[args[4]]])
tabulatedData = table(data1,data2)
cat(levels(data1),'\n')
cat(levels(data2),'\n')
cat(tabulatedData)
}
?table
a = as.factor(c("",1,2,3))
a[is.na(a)] = f
a[is.na(a)] = 'f'
a[is.na(a)] = '1'
a
a[is.null(a)] = '1'
a
a
a[1]
[is.na(a)]
[\is.na(a)
is.na(a)
is.null(a)
is.finite(a)
is.numeric(a)
as.numeric(a)
a[which]
a
View(a)
a[a == ""] = 1
a
a
levels(a)
table(a)
as.dataframe(a)
dataframe(a)
data.frame(a)
a[1]
data.frame(c("",1,2,3))
a[1]
a=data.frame(c("",1,2,3))
a[1]
a[2]
a[[2]]
a[[1]]
a[[a[[1]]=='']=1
a[[a[[1]]=='']]=1
a[[1]]==''
as.character(a)
a=as.character(a)
a=data.frame(c("",1,2,3,4))
as.numeric(as.character(a))
as.numeric(as.character(a[1]))
a
as.numeric(as.character(a[[]]))
as.numeric(as.character(a[[1]]))
table(a)
a[a==''] = 1
a
as.factor(a)
as.factor(a[[2]])
as.factor(a[[1]])
args = commandArgs(TRUE)
require("data.table",quietly=TRUE)
filepath = args[2]
if(args[1] == "goodfittest"){
data = fread(filepath,select=args[3],showProgress=FALSE)
if(args[4] == 'r' || args[4] == 'R'){
data = data[data!='']
}else{
data[data==''] = args[4]
}
data = as.factor(data[[args[3]]])
tabulatedData = table(data)
cat(levels(data),'\n')
cat(tabulatedData)
}else{
data = fread(filepath,select=c(args[3],args[4]),showProgress=FALSE)
if(args[5] == 'r' || args[5] == 'R'){
data[[4]] = data[[!is.na(data[[4]])]]
}else{
data[is.na(data)] = args[4]
}
if(args[6] == 'r' || args[6] == 'R'){
data[[5]] = data[[!is.na(data[[5]])]]
}else{
data[is.na(data)] = args[4]
}
data1 = as.factor(data[[args[3]]])
data2 = as.factor(data[[args[4]]])
tabulatedData = table(data1,data2)
cat(levels(data1),'\n')
cat(levels(data2),'\n')
cat(tabulatedData)
}
a = a[a!='']
a=data.frame(c('',1,2,3,4))
a = a[a!='']
as.factor(a)
a=data.frame(c('',1,2,3,4))
a = a[a!='']
as.factor(a[[1]])
a=data.frame(a,\c('',1,2,3,4))
a=data.frame(a,c('',1,2,3,4))
a=data.frame(c('',1,2,3,4))
a[a==''] = NULL
a[a==''] = null
?"["
a = a[a!='']
a01 <- data.frame(a = 1:10)
as.vector(a01)
a02 <- as.vector(a01)
class(a02)
which(is.na(a01))
b=which(is.na(a01))
is.na(b)
is.na(a01)
x = a01[is.na(a01)]
x
x == NULL
x == 0
x = a01[!is.na(a01)]
x = is.na(a01)
sum(x)
x = !iis.na(a01)
x = !is.na(a01)
sum(x)
sum(is.na(a01))
sum(!is.na(a01))
cat(a,file="hi")
cat(a,'1',file="hi")
cat(levels(a))
cat(levels(a),file = "hi")
levels(a)
args = commandArgs(TRUE)
require("data.table",quietly=TRUE)
filepath = args[2]
if(args[1] == "goodfittest"){
data = fread(filepath,select=args[3],showProgress=FALSE)
data = as.character(data[[args[3]]])
if(args[4] == 'r' || args[4] == 'R'){
data = data[data != '']
}else{
data[data==''] = args[4]
}
data = as.factor(data)
tabulatedData = table(data)
cat(levels(data),'\n',file = "tabulatedDatafile")
cat(tabulatedData,file = "tabulatedDatafile",append = TRUE)
}else{
data = fread(filepath,select=c(args[3],args[4]),showProgress=FALSE)
col1 = as.character(data[[args[3]]])
col2 = as.character(data[[args[4]]])
rm(data)
if(args[5] == 'r' || args[5] == 'R'){
col1 = col1[col1 != '']
}else{
col1[col1 == ''] = args[4]
}
if(args[6] == 'r' || args[6] == 'R'){
col2 = col2[col2 != '']
}else{
col2[col2 == ''] = args[5]
}
col1 = as.factor(col1)
col2 = as.factor(col2)
tabulatedData = table(col1,col2)
cat(levels(col1),'\n',file = "tabulatedData")
cat(levels(col2),'\n',file = "tabulatedData", append=TRUE)
cat(tabulatedData,file = "tabulatedData",append = TRUE)
}
